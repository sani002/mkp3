from pyexpat import model
import streamlit as st 
st.image('data:image/png;base64,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')
st.title("Monkey Pox Detector")

import keras
from PIL import Image, ImageOps
import numpy as np

def teachable_machine_classification(img, weights_file):
    model = keras.models.load_model(weights_file)
    data = np.ndarray(shape=(1, 256, 256, 3), dtype=np.float32)
    image = img
    size = (256, 256)
    image = ImageOps.fit(image, size, Image.ANTIALIAS)
    image_array = np.asarray(image)
    normalized_image_array = (image_array.astype(np.float32) / 255.0)
    data[0] = normalized_image_array
    prediction = model.predict(data)
    return prediction 
number = st.radio('Pick one', ['Upload from gallery', 'Capture by camera'])
if number=='Capture by camera':
    uploaded_file = st.camera_input("Take a picture")    
else:
    uploaded_file = st.file_uploader("Choose an image", type=["jpg", "png","jpeg","bmp"])
if uploaded_file is not None:
        image = Image.open(uploaded_file)
        st.image(image, caption='Uploaded image.', use_column_width=True)
        st.write("")
        st.write("Classifying...")
        label = teachable_machine_classification(image, 'model.h5')
        if label < 0.5:
            st.write("It might be Monkeypox. You should visit a specialist immediately. Thank you.")
            st.write("Probability")
            st.write(1-label)
        else:
            st.write("It's most probably not monkeypox, but still you should visit a skin specialist. Thank you.")
            st.write("Probability")
            st.write(1-label)
